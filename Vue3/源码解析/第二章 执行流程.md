# 执行流程

## 引言
### 当我们初始化一个 Vue 项目时，会调用以下 Api：
~~~javascript
import Vue from 'vue'
Vue.createApp().mount()
~~~
## 一、Vue 包
~~~javascript
import Vue from 'vue'
~~~
### 在上述模块导入过程中引用了 Vue 包，我们看看方法 createApp 包含了哪些逻辑

~~~javascript
/**
 * module   : vue
 * filepath : src/indexjs
 * linenum  : 90
 */

export * from '@vue/runtime-dom'
~~~
### createApp 是从 runtime-dom 包导出

~~~javascript
/**
 * module   : runtime-dom
 * filepath : src/index.js  
 */

// linenum  : 1
import {
    createRenderer
} from '@vue/runtime-core'

// linenum  : 42
function ensureRenderer() {
    renderer || (renderer = createRenderer<Node,Element | ShadowRoot>(rendererOptions))
}

// linenum  : 66
export const createApp = ((...args) -> {
    const app = ensureRenderer().createApp(...args)
    const {mount} = app
    app.mount = (containerOrSelector) => {
        const container = normalizeContainer(containerOrSelector)
        if(!container) return
        const component = app._component
        if(!isFunction(component) && !component.render && component.template) {
            component.template = container.innerHTML
        }
        component.innerHTML = ''
        const proxy = mount(container, false, container instanceof SVGElement)
        return proxy
    }
    return app
})
~~~
### 代码引用了 runtime-core 包的 createRenderer 创建渲染器，并用该渲染器创建 app，包装了 app.mount 后将 app 返回。

(今天先到这里，下次追更)