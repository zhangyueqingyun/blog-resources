# React Context

React Context 的实现了数据的跨组件共享。这一章介绍在 react 内部有创建、消费、更新的源码。

## 一、前言

```javascript
const MyContext = React.createContext(defaultValue);
```

```javascript
<MyContext.Provider value={{value}}>
</MyContext>
```

```javascript
import React, {useContext} from 'react';
import MyContext from './context'
export function () {
    const {value} = useContext(MyContext);
}
```

## 二、Context

```javascript
export function createContext() {
    const context = {
        $$typeof: REACT_CONTEXT_TYPE,
        _currentValue: defaultValue,
        _currentValue2: defaultValue,
        _threadCount: 0,
        Provider: null,
        Consumer: null,
        _defaultValue: null,
        _globalName: null
    };

    context.Provider = {
        $$typeof: REACT_PROVIDER_TYPE,
        _context: context,
    };

    let hasWarnedAboutUsingNestedContextConsumers = false;
    let hasWarnedAboutUsingConsumerProvider = false;
    let hasWarnedAboutDisplayNameOnConsumer = false;

    context.Consumer = context;
    
    return context;
}
```